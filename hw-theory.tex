\documentclass[10pt,a4paper,oneside]{article}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{enumerate}
\usepackage{stmaryrd}
\usepackage{cmll}
\usepackage{mathrsfs}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm,bindingoffset=0cm]{geometry}
\usepackage{proof}
\usepackage{tikz}
\usepackage{multicol}
\usepackage{mathabx}
\usepackage{comment}
\usepackage{hyperref}
\usepackage[normalem]{ulem}
\usepackage{cancel}

\makeatletter
\newcommand{\dotminus}{\mathbin{\text{\@dotminus}}}

\newcommand{\@dotminus}{%
  \ooalign{\hidewidth\raise1ex\hbox{.}\hidewidth\cr$\m@th-$\cr}%
}
\makeatother

\usetikzlibrary{arrows,backgrounds,patterns,matrix,shapes,fit,calc,shadows,plotmarks}

\newtheorem{definition}{Определение}
\newtheorem{theorem}{Теорема}
\begin{document}

\begin{center}{\Large\textsc{\textbf{Теоретические домашние задания}}}\\
             \it Математическая логика, ИТМО, М3232-М3239, осень 2024 года\end{center}

\section*{Общие замечания}

\begin{enumerate}
\item Одно задание оценивается в 3.5 балла. При использовании TeX или Typst для оформления задание оценивается в 4 балла. При крайне плохом оформлении оценка может быть понижена до 3 баллов.
\item Заданием (по умолчанию) считается один пункт, занумерованный цифрой или буквой. Пункты без нумерации считаются частями одного задания.
\item Курс можно условно разделить на три части (исчисления высказываний и предикатов, формальная арифметика, теория множеств). В каждой из частей можно ответить не более четырёх заданий.
\end{enumerate}

\section*{Задание №1. Знакомство с классическим исчислением высказываний.}

При решении заданий вам может потребоваться теорема о дедукции (будет доказана на второй лекции): 
\begin{theorem}
$\gamma_1,\dots,\gamma_n, \alpha \vdash \beta$ 
тогда и только тогда, когда $\gamma_1,\dots,\gamma_n \vdash \alpha\rightarrow\beta$. 
\end{theorem}

Пример использования: пусть необходимо доказать $\vdash A \rightarrow A$ --- то есть
доказать существование вывода формулы $A \rightarrow A$ (заметьте, так поставленное
условие не требует этот вывод предъявлять, только доказать его существование).
Тогда заметим, что последовательность из одной формулы $A$ доказывает $A \vdash A$. 
Далее, по теореме о дедукции, отсюда следует и $\vdash A \rightarrow A$ 
(то есть, существование вывода формулы $A \rightarrow A$, не использующего гипотезы).

Теорема будет доказана конструктивно: будет предъявлен алгоритм,
перестраивающий вывод $\gamma_1,\dots,\gamma_n, \alpha \vdash \beta$ 
в вывод $\gamma_1,\dots,\gamma_n \vdash \alpha\rightarrow\beta$ 

\begin{enumerate}
\item Докажите:
\begin{enumerate}
\item $\vdash (A \rightarrow A \rightarrow B) \rightarrow (A \rightarrow B)$
\item $\vdash \neg (A \with \neg A)$
\item $\vdash A \with B \rightarrow B \with A$
\item $\vdash A \vee B \rightarrow B \vee A$
\item $A \with \neg A \vdash B$
\end{enumerate}

\item Докажите:
\begin{enumerate}
\item $\vdash A \rightarrow \neg \neg A$
\item $\neg A, B \vdash \neg(A\& B)$
\item $\neg A,\neg B \vdash \neg( A\vee B)$
\item $ A,\neg B \vdash \neg( A\rightarrow B)$
\item $\neg A, B \vdash  A\rightarrow B$
\end{enumerate}

\item Докажите:
\begin{enumerate}
\item $\vdash (A \rightarrow B) \rightarrow (B \rightarrow C) \rightarrow (A \rightarrow C)$ 
\item $\vdash (A \rightarrow B) \rightarrow (\neg B \rightarrow \neg A)$ \emph{(правило контрапозиции)}
\item $\vdash \neg (\neg A \with \neg B) \rightarrow (A \vee B)$ \emph{(вариант I закона де Моргана)}
\item $\vdash A \vee B \rightarrow \neg(\neg A \with \neg B)$
\item $\vdash (\neg A \vee \neg B) \rightarrow \neg (A \with B)$ \emph{(II закон де Моргана)}
\item $\vdash (A \rightarrow B) \rightarrow (\neg A \vee B)$
\item $\vdash A \with B \rightarrow A \vee B$
\item $\vdash ((A \rightarrow B) \rightarrow A)\rightarrow A$ \emph{(закон Пирса)}
\item $\vdash A \vee \neg A$
\item $\vdash (A \with B \rightarrow C) \rightarrow (A \rightarrow B \rightarrow C)$
\item $\vdash A \with (B \vee C) \rightarrow (A \with B) \vee (A \with C)$ \emph{(дистрибутивность)}
\item $\vdash (A \rightarrow B \rightarrow C) \rightarrow (A \with B \rightarrow C)$
\item $\vdash (A \rightarrow B) \vee (B \rightarrow A)$
\item $\vdash (A \rightarrow B) \vee (B \rightarrow C) \vee (C \rightarrow A)$
\end{enumerate}

\item Даны высказывания $\alpha$ и $\beta$, причём $\vdash \alpha\rightarrow\beta$ и $\not\vdash\beta\rightarrow\alpha$. 
Укажите способ построения высказывания $\gamma$, такого, что
$\vdash\alpha\rightarrow\gamma$ и $\vdash\gamma\rightarrow\beta$, причём $\not\vdash\gamma\rightarrow\alpha$ и
$\not\vdash\beta\rightarrow\gamma$.

\item Покажите, что если $\alpha \vdash \beta$ и $\neg\alpha\vdash\beta$, то $\vdash\beta$.

\item Покажите, что классическое исчисление высказываний допускает правило Modus Tollens:
$$\infer{\neg\varphi}{\varphi\rightarrow\psi\quad\quad\neg\psi}$$

А именно, пусть дан некоторый вывод, в котором каждая формула --- либо аксиома, либо получена по правилу Modus Ponens, либо имеет вид $\delta_n \equiv \neg\varphi$, причём
ранее в доказательстве встречается $\delta_i \equiv \neg\psi$ и $\delta_j \equiv \varphi\rightarrow\psi$ (при этом $\max(i,j) < n$). Тогда такой вывод можно перестроить в
корректное доказательство в классическом исчислении высказываний.

В данном задании от вас требуется аккуратное изложение доказательства, видимо, использующее математическую индукцию. То есть, чётко
сформулированное индукционное предположение и полные доказательства базы и перехода.
\end{enumerate}

\section*{Задание №2. Теоремы об исчислении высказываний. Знакомство с интуиционистским исчислением высказываний.}
\begin{enumerate}
\item Давайте вспомним, что импликация правоассоциативна: $\alpha\rightarrow\beta\rightarrow\gamma \equiv \alpha\rightarrow(\beta\rightarrow\gamma)$.
Но рассмотрим иную расстановку скобок: $(\alpha\rightarrow\beta)\rightarrow\gamma$. Возможно ли доказать логическое следствие
между этими вариантами расстановки скобок --- и каково его направление? Зависит ли это от варианта исчисления (классическое/интуиционистское)?
\item Покажите, что в классическом исчислении высказываний $\Gamma \models \alpha$ влечёт $\Gamma \vdash \alpha$.
\item Покажите, что в классическом исчислении высказываний $\Gamma \vdash \alpha$ влечёт $\Gamma \models \alpha$.
\item Возможно ли, что какая-то из аксиом задаётся двумя разными схемами аксиом? Опишите все возможные коллизии для какой-то одной такой пары схем аксиом.
Ответ обоснуйте (да, тут потребуется доказательство по индукции).

\item Заметим, что можно вместо отрицания ввести в исчисление ложь. Рассмотрим \emph{исчисление высказываний с ложью}.
В этом языке будет отсутствовать одноместная связка $(\neg)$, вместо неё будет присутствовать нульместная
связка <<ложь>> $(\bot)$, а 9 и 10 схемы аксиом будут заменены на одну схему:

\begin{tabular}{ll}
$(9_\bot)$ & $((\alpha\rightarrow\bot)\rightarrow\bot)\rightarrow\alpha$
\end{tabular}

Будем записывать доказуемость в новом исчислении как $\vdash_\bot \alpha$, а доказуемость в исчислении высказываний
с отрицанием как $\vdash_\neg \beta$. Также определим операцию трансляции между языками обычного исчисления высказываний и исчисления с ложью
как операции рекурсивной замены $\bot := A \with \neg A$ и $\neg \alpha := \alpha \rightarrow \bot$ (и обозначим их
как $|\varphi|_\neg$ и $|\psi|_\bot$ соответственно).

Докажите:
\begin{enumerate}
\item $\vdash_\bot \alpha$ влечёт $\vdash_\neg |\alpha|_\neg$
\item $\vdash_\neg \alpha$ влечёт $\vdash_\bot |\alpha|_\bot$
\end{enumerate}

\item Покажите, что топологическое пространство на вещественных числах с базой $\mathcal{B} = \{(a,b)\ |\ a,b \in \mathbb{R}\}$ совпадает
с топологическим пространством $\mathbb{R}$ из матанализа (то есть, совпадают множества открытых множеств).

\item Покажите, что дискретная топология, антидискретная топология (открыты только $\varnothing$ и $X$), топология стрелки, топология Зарисского
(носитель --- $\mathbb{R}$, открыты $\varnothing$, $\mathbb{R}$ и все множества с конечным дополнением) являются топологиями.

\item Заметим, что определения стараются давать как можно более узкими: если некоторое свойство вытекает из других, то это уже не свойство из определения, а теорема.
Поэтому приведите примеры $\langle X, \Omega\rangle$, нарушающие только первое, только второе и только третье условие на топологию.

\item Напомним, что замкнутое множество --- такое, дополнение которого открыто.
Заметим, что на $\mathbb{R}$ ровно два множества одновременно открыты и замкнуты --- $\varnothing$ и всё пространство. Постройте другую
(не евклидову) топологию на $\mathbb{R}$, чтобы в ней было ровно четыре множества, которые одновременно открыты и замкнуты. А возможно ли построить
топологическое пространство, в котором было бы ровно три открыто-замкнутых множества?

\item Назовём минимальной базой топологии такую базу, что в ней никакое множество не может быть получено объединением семейства других множеств из базы. 
\begin{enumerate}
\item Постройте минимальную базу для дискретной топологии.
\item Существует ли минимальная база для топологии стрелки?
\item Существует ли минимальная база для топологии Зарисского (носитель --- $\mathbb{R}$, открыты $\varnothing$, $\mathbb{R}$ и все множества с конечным дополнением)?
\end{enumerate}

\item Предложите пример топологического пространства, в котором пересечение произвольного семейства открытых множеств --- открыто.
Топологическое пространство должно иметь бесконечный носитель (чтобы задача имела содержательный смысл) и не должно иметь дискретную 
или антидискретную топологию (не должно быть в каком-то смысле вырожденным).

\item Наибольшим (наименьшим) значением в каком-то множестве назовём такое, которое больше (меньше) всех других элементов множества. 
Несложно заметить, что для отношения включения множеств далеко не всегда такое можно определить: например, на $\mathbb{R}^2$ не существует наибольшего круга с радиусом 1,
хотя такой круг существует на $\{ z\ |\ z \in \mathbb{R}^2, |z| \le 1\}$.

\emph{Внутренностью} множества $A^\circ$ назовём наибольшее открытое множество, содержащееся в $A$. 
Покажите, что внутренность множества всегда определена.

\item Напомним определения: \emph{замкнутое} множество --- такое, дополнение которого открыто.
\emph{Замыканием} множества $\overline{A}$ назовём наименьшее замкнутое множество, содержащее $A$.
Назовём \emph{окрестностью} точки $x$ такое открытое множество $V$, что $x \in V$.
Будем говорить, что точка $x \in A$ \emph{внутренняя}, если существует окрестность $V$, что $V \subseteq A$.
Точка $x$ --- \emph{граничная}, если любая её окрестность $V$ пересекается как с $A$, так и с его дополнением.
\begin{enumerate}
\item \begin{itemize} \item Покажите, что $A$ открыто тогда и только тогда, когда все точки $A$ --- внутренние.
Также покажите, что $A^\circ = \{ x|x \in A \with x\text{ --- внутренняя точка}\}$;
\item Покажите, что $A$ замкнуто тогда и только тогда, когда содержит все свои граничные точки.
Также покажите, что $\overline{A} = \{ x\ |\ x\text{ --- внутренняя или граничная точка}\}$.
\item Верно ли, что $\overline{A} = X \setminus ((X\setminus A)^\circ)$?\end{itemize}
\item Пусть $A \subseteq B$. Как связаны $A^\circ$ и $B^\circ$, а также $\overline{A}$ и $\overline{B}$?
 Верно ли $(A \cap B)^\circ = A^\circ \cap B^\circ$ и $(A \cup B)^\circ = A^\circ \cup B^\circ$?
\item \emph{Задача Куратовского.} Будем применять операции взятия внутренности и замыкания к некоторому множеству
всевозможными способами. Сколько различных множеств может всего получиться?
\emph{Указание.} Покажите, что $\overline{\left(\overline{A^\circ}\right)^\circ} = \overline{A^\circ}$.
\end{enumerate}

\item Задача проверки высказываний на истинность в ИИВ сложнее, чем в КИВ --- не существует конечного набора значений,
на которых можно проверить формулу, чтобы определить её истинность (мы эту теорему докажем). Тем не менее, если формула
опровергается, то она опровергается на $\mathbb{R}$ с евклидовой топологией. Если же такого опровержения нет, то формула 
доказуема (то есть, ИИВ семантически полно на $\mathbb{R}$). Например, формула $A \vee \neg A$ опровергается при $\llbracket A \rrbracket = (0,+\infty)$,
так как $\llbracket A \vee \neg A \rrbracket = \mathbb{R}\setminus\{0\}$.

Очевидно, что любая интуиционистская тавтология общезначима и в классической логике:
\begin{itemize}
\item формула общезначима в интуиционистской логике; 
\item значит, истинна при всех оценках; 
\item значит, в частности, при всех оценках на $\mathbb{R}$;
\item то есть, по теореме, упомянутой выше, доказуема в ИИВ;
\item а схема аксиом 10и --- частный случай схемы аксиом 10.
\end{itemize}
Обратное же неверно. Определите, являются ли следующие формулы тавтологиями в КИВ и ИИВ (предложите опровержение или доказательство общезначимости/выводимости для каждого
из исчислений):

\begin{enumerate}
\item $((A \rightarrow B) \rightarrow A) \rightarrow A$;
\item $\neg\neg A \rightarrow A$;
\item $(A \rightarrow B) \vee (B \rightarrow A)$ (из двух утверждений одно непременно следует из другого: например, <<я не люблю зиму>> и <<я не люблю лето>>);
\item $(A \rightarrow B) \vee (B \rightarrow C)$;
\item $(A \rightarrow (B \vee \neg B)) \vee (\neg A \rightarrow (B \vee \neg B))$;
\item $\alpha\vee\beta \vdash \neg(\neg\alpha\with\neg\beta)$ и $\neg(\neg\alpha\with\neg\beta) \vdash \alpha\vee\beta$;
\item $\neg\alpha\with\neg\beta \vdash \neg(\alpha\vee\beta)$ и $\neg(\alpha\vee\beta) \vdash \neg\alpha\with\neg\beta$;
\item $\alpha\rightarrow\beta \vdash \neg\alpha\vee\beta$ и $\neg\alpha\vee\beta \vdash \alpha\rightarrow\beta$.
\end{enumerate}

\item Известно, что в КИВ все связки могут быть выражены через операцию <<и-не>> (<<или-не>>). Также, они могут быть выражены друг через
друга (достаточно, например, отрицания и конъюнкции). Однако, в ИИВ это не так.

Покажите, что никакие связки не выражаются друг через друга: то есть, нет такой формулы $\varphi(A,B)$ из языка 
интуиционистской логики, не использующей связку $\star$, что $\vdash A \star B \rightarrow \varphi(A,B)$ и $\vdash\varphi(A,B) \rightarrow A \star B$.
Покажите это для каждой связки в отдельности:
\begin{enumerate}
\item конъюнкция;
\item дизъюнкция;
\item импликация;
\item отрицание.
\end{enumerate}

\end{enumerate}

\section*{Задание №3. Изоморфизм Карри-Ховарда. Дополнительные топологические определения. Решётки. }
\begin{enumerate}
\item Непрерывной функцией называется такая, для которой прообраз открытого множества всегда открыт.
Путём на топологическом пространстве $X$ назовём непрерывное отображение вещественного отрезка $[0,1]$ в $X$.
Опишите пути (то есть, опишите, какие функции могли бы являться путями):
\begin{enumerate}
\item на $\mathbb{N}$ (с дискретной топологией);
\item в топологии Зарисского;
\item на дереве (с топологией с лекции);
\end{enumerate}

\item Докажите, что функция $f: \mathbb{R}\rightarrow\mathbb{R}$ непрерывна тогда и только тогда, когда
$\lim_{x \rightarrow x_0} f(x) = f(x_0)$ для всех $x_0 \in \mathbb{R}$.

\item Связным множеством в топологическом пространстве назовём такое, которое связно как подпространство.
Линейно связным множеством назовём такое, в котором две произвольные точки могут быть соединены путём,
образ которого целиком лежит в множестве. 
\begin{enumerate}
\item Покажите, что линейно связное множество всегда связно;
\item Покажите, что связное не обязательно линейно связное.
\end{enumerate}

\item Всегда ли непрерывным образом связного пространства является другое связное (под)пространство? Докажите или опровергните.

\item Как мы помним с лекции, возможно доказывать интуиционистские утверждения, воспользовавшись изоморфизмом Карри-Ховарда, 
то есть написав соответствующую программу на каком-нибудь статически типизированном языке программирования. 

Например, на C++ так можно доказать $A\rightarrow A$:
\begin{verbatim}
A identity (A x) { return x; }
\end{verbatim}

Докажите следующие утверждения, не пользуясь в коде тем фактом, что обычно языки программирования
противоречивы (то есть, не используйте исключений, функций, не возвращающих управления, и других подобных конструкций).
\begin{enumerate}
\item $A \rightarrow B \rightarrow A$
\item $A \with B \rightarrow A \vee B$
\item $(A \with (B \vee C)) \rightarrow ((A \with B) \vee (A \with C))$
\item $(A \rightarrow C) \with (B \rightarrow C) \with ((A \vee B) \rightarrow C)$
\item $(B \vee C \rightarrow A) \rightarrow (B \rightarrow A) \with (C \rightarrow A)$
\item $(A \rightarrow B) \rightarrow (\neg B \rightarrow \neg A)$
\item $((A \rightarrow B) \rightarrow C) \rightarrow (A \rightarrow (B \rightarrow C))$
\item $(A \rightarrow B) \with (A \rightarrow \neg B) \rightarrow \neg A$
\item Выразимые в интуиционистском исчислении высказываний аналоги правил де Моргана для импликации.
\end{enumerate}

\item Рассмотрим подмножество частично упорядоченного множества, и рассмотрим следующие свойства:
(а) наличие наибольшего элемента; (б) наличие супремума;
(в) наличие единственного максимального элемента. Всего можно рассмотреть шесть утверждений ((а) влечёт (б), 
(а) влечёт (в), и т.п.) --- про каждое определите, выполнено ли оно в общем случае,
и приведите либо доказательство, либо контрпример. Задача состоит из одного пункта, для получения баллов 
все шесть утверждений должны быть разобраны.

\item Покажите следующие утверждения для импликативных решёток:
\begin{enumerate}
\item монотонность: пусть $a \preceq b$ и $c \preceq d$, тогда $a + c \preceq b + d$ и $a \cdot c \preceq b \cdot d$;
\item \emph{законы поглощения:} $a \cdot (a + b) = a$; $a + (a \cdot b) = a$;
\item $a \preceq b$ выполнено тогда и только тогда, когда $a \rightarrow b = 1$;
\item из $a \preceq b$ следует $b\rightarrow c \preceq a\rightarrow c$ и $c\rightarrow a \preceq c \rightarrow b$;
\item из $a \preceq b \rightarrow c$ следует $a \cdot b \preceq c$;
\item $b \preceq a \rightarrow b$ и $a \rightarrow (b \rightarrow a) = 1$;
\item $a \rightarrow b \preceq ((a \rightarrow (b \rightarrow c)) \rightarrow (a \rightarrow c))$;
\item $a \preceq b \rightarrow a \cdot b$ и $a \rightarrow (b \rightarrow (a \cdot b)) = 1$
\item $a \rightarrow c \preceq (b \rightarrow c) \rightarrow (a + b \rightarrow c)$
\item импликативная решётка дистрибутивна: $(a + b) \cdot c = (a \cdot c) + (b \cdot c)$
\end{enumerate}

\item Докажите, основываясь на формулах предыдущих заданий, что интуиционистское исчисление высказываний
корректно, если в качестве модели выбрать алгебру Гейтинга.

\item Покажите, что на конечном множестве дистрибутивная решётка всегда импликативна.
\item Постройте пример дистрибутивной, но не импликативной решётки.
\item Покажите, что в дистрибутивной решётке всегда $a + (b \cdot c) = (a + b) \cdot (a + c)$.

\item Пусть $R \subseteq A\times A$ --- отношение эквивалентности (то есть транзитивное, рефлексивное и симметричное).
Тогда фактор-множество $A/_R := \{ [ x ]_R\ |\ x \in A\}$ --- множество \emph{классов эквивалентности},
где $[x]_R = \{ t\in A\ |\ tRx\}$.

Покажите, что каждый элемент множества $A$ принадлежит в точности одному классу эквивалентности. Два класса эквивалентности либо не пересекаются, либо совпадают.

\item Пусть $R \subseteq A\times A$ --- отношение нестрогого предпорядка (транзитивное и рефлексивное). И пусть
$a \approx b$, если $aRb$ и $bRa$. Покажите, что 
\begin{enumerate}
\item Если $aRb$ и $a \approx a'$, $b \approx b'$, то $a'Rb'$.
\item $R/_\approx$ --- отношение нестрогого порядка на $A/_\approx$ в следующем смысле: $[a]_\approx R/_\approx [b]_\approx$ выполнено, если $aRb$
(корректность определения также необходимо показать).
\end{enumerate}

\item Покажите, что $(\preceq)$ из определения алгебры Линденбаума --- отношение нестрогого предпорядка, $(\approx)$ --- отношение эквивалентности, а
$(\preceq)/_\approx$ --- отношение нестрогого порядка.

\item Покажите, что $[\alpha]_\mathcal{L} + [\beta]_\mathcal{L} = [\alpha\vee\beta]_\mathcal{L}$.
Зависит ли результат от выбора представителей классов эквивалентности $[\alpha]$ и $[\beta]$? Ответ также докажите.
\item Покажите, что $[\alpha\rightarrow\beta]_\mathcal{L}$ --- псевдодополнение $[\alpha]_\mathcal{L}$ до $[\beta]_\mathcal{L}$.
\end{enumerate}

\section*{Задание №4. Модели для ИИВ}

В этих задачах вводится ранжирование задач по сложности. Простые задачи будут оцениваться в 3.5 балла, как раньше, а
сложные задачи в 5.5 баллов. Сложные задачи отмечены звёздочкой.

\begin{enumerate}
\item Определение: противоречивая теория --- такая, в которой доказуема любая формула. 
Покажите, что для КИВ (а равно и для ИИВ) определение имеет следующие эквивалентные формулировки:
\begin{itemize}
\item доказуема любая формула исчисления;
\item $\vdash\alpha\with\neg\alpha$ при некотором $\alpha$;
\item $\vdash A\with\neg A$;
\item для некоторой формулы $\alpha$ имеет место $\vdash\alpha$ и $\vdash\neg\alpha$. 
\end{itemize}

Также покажите, что КИВ непротиворечиво (расшифруйте слово <<очевидно>> с первого слайда четвёртой лекции).

\item Опровергните формулы с помощью какой-нибудь модели Крипке:
\begin{enumerate}
\item $((A\rightarrow B) \rightarrow A) \rightarrow A$;
\item $(A\rightarrow B) \rightarrow \neg A \vee B$;
\item $(A \rightarrow (B \vee \neg B)) \vee (\neg A \rightarrow (B \vee \neg B))$.
\end{enumerate}

\item Покажите, что любая модель Крипке обладает свойством: для любых $W_i, W_j, \alpha$, 
если $W_i \preceq W_j$ и $W_i \Vdash \alpha$, то $W_j \Vdash \alpha$.

\item Несколько задач на упрощение структуры миров моделей Крипке.
\begin{enumerate}
\item Покажите, что формула опровергается моделью Крипке тогда и только тогда, когда она
опровергается древовидной моделью Крипке.

\item (*) Верно ли, что если формула опровергается некоторой конечной древовидной моделью Крипке (причём
у каждой вершины не больше двух сыновей), то эту 
древовидную модель можно достроить до полного бинарного дерева, с сохранением свойства опровержимости?

\item (*) Верно ли, что если некоторая модель Крипке опровергает некоторую формулу,
то добавление любого мира к модели в качестве потомка к любому из узлов оставит опровержение в силе?
\end{enumerate}

\item Покажите, что модель Крипке $\mathcal{M}$ из одного узла эквивалентна классической модели.
То есть, по каждой такой модели можно найти эквивалентную ей классическую модель $\mathcal{T}$, что $\models_\mathcal{M}\alpha$ 
тогда и только тогда, когда $\models_\mathcal{T}\alpha$. Напомним, что для задания классической модели
необходимо указать значения всех пропозициональных переменных. Сохранится ли это свойство для модели,
заданной на лесе несвязных узлов?

\item (*) Покажите, что формула опровергается моделью Крипке тогда и только тогда, когда она опровергается конечной моделью Крипке.

\item Постройте опровержимую в ИИВ формулу, которая не может быть опровергнута моделью Крипке (ответ требуется доказать):
\begin{enumerate}
\item (*) глубины 0 или 1;
\item (*) глубины $n \in \mathbb{N}$ и меньше.
\end{enumerate}

%\item Согласно доказательству корректности моделей Крипке, всевозможные множества узлов, в которых переменные
%вынуждены, образуют топологию. Рассмотрим модель Крипке из лекции, опровергающую формулу исключённого третьего
%$A\vee\neg A$. Постройте топологическое пространство и топологию, подсказанную доказательством: какие в ней
%открытые множества, какова оценка для $A$, и вычислите, каково значение формулы при такой оценке переменной.

\item Давайте разберёмся во взаимоотношениях различных формулировок закона исключенного третьего и подобных
законов. Для этого определим \emph{минимальное} исчисление высказываний как ИИВ без 10 схемы аксиом.
Заметим, что переход от $\vdash\neg\neg\alpha\rightarrow\alpha$ при всех $\alpha$ к
$\vdash((\alpha\rightarrow\beta)\rightarrow\alpha)\rightarrow\alpha$ уже был ранее доказан 
(закон Пирса следует из закона снятия двойного отрицания).

Давайте продолжим строить кольцо:

\begin{center}\tikz{
    \node (D) at (0,0) {$\vdash\neg\neg\alpha\rightarrow\alpha$};
    \node (P) at (4,1) {$\vdash((\alpha\rightarrow\beta)\rightarrow\alpha)\rightarrow\alpha$};
    \node (L) at (8,0) {$\vdash\alpha\vee\neg\alpha$};
    \draw[-stealth] (D) to [bend right=10] (P);
    \draw[-stealth] (P) to [bend right=10] (L);
    \draw[-stealth,dashed] (L) to [bend left=20] node[below] {если $\vdash\alpha\rightarrow\neg\alpha\rightarrow\beta$ при всех $\alpha$, $\beta$}  (D);
}\end{center}

для чего покажите, что в минимальном исчислении:
\begin{enumerate}
%\item Если $\vdash\neg\neg\alpha\rightarrow\alpha$ при всех $\alpha$, то
%$\vdash((\alpha\rightarrow\beta)\rightarrow\alpha)\rightarrow\alpha$ (закон Пирса следует из закона снятия двойного отрицания).
\item Если $\vdash((\alpha\rightarrow\beta)\rightarrow\alpha)\rightarrow\alpha$ при всех $\alpha$ и $\beta$, то
$\vdash\alpha\vee\neg\alpha$ (закон исключённого третьего следует из закона Пирса).
\item Если $\vdash\alpha\rightarrow\neg\alpha\rightarrow\beta$ (<<из лжи следует, что угодно>>, 
он же \emph{принцип взрыва}) и $\vdash\alpha\vee\neg\alpha$ при всех $\alpha$ и $\beta$, то $\vdash\neg\neg\alpha\rightarrow\alpha$.
\item (*) Из закона Пирса не следует закон снятия двойного отрицания и из закона исключённого третьего не следует закон Пирса.
\item (*) Закон Пирса и принцип взрыва независимы (невозможно доказать один из другого).
\end{enumerate}

\end{enumerate}

\section*{Задание №5. Исчисление предикатов}

\begin{enumerate}
\item (Приводится по учебнику Ивлева Ю.В. <<Логика>>, 2006 год) Определите состав, фигуру, модус силлогизма и проверьте его.
Формализуйте утверждение в исчислении предикатов (пусть это будет вывод из посылок вида $\alpha,\beta\vdash\gamma$).
\begin{enumerate}
\item Некоторые учащиеся являются троечниками. Все студенты --- учащиеся. Следовательно, некоторые студенты --- троечники.
\item Каждый капитан корабля обладает громким голосом. Каждый оперный певец обладает громким голосом. Следовательно, некоторые капитаны кораблей являются оперными певцами.
\item Все рыбы дышат жабрами. Некоторые дышащие жабрами живут в море. Следовательно, среди обитателей моря имеются рыбы.
\end{enumerate}
\item (Приводится по учебнику Ивлева Ю.В. <<Логика>>, 2006 год) Осуществите, если это возможно, правильный вывод из следующих посылок по одной из фигур силлогизма. 
Формализуйте утверждение в исчислении предикатов.
\begin{enumerate}
\item Все ученые занимаются умственным трудом. Некоторые ученые не являются городскими жителями.
\item Некоторые верующие не имеют высшего образования. Все католики --- верующие.
\end{enumerate}
\item Формализуйте какой-нибудь силлогизм с <<плохим>> модусом (требующий условие непустоты среднего термина) в исчислении предикатов. 
Докажите силлогизм с условием непустоты в исчислении предикатов --- и постройте контрпример к силлогизму без условия непустоты среднего термина (постройте надлежащую модель).
\item Постройте по силлогизму из двух разных модусов (сильного и слабого). Формализуйте их и постройте доказательство в исчислении предикатов, что из сильного силлогизма следует слабый 
(то есть заключение силлогизма сильного модуса влечёт заключение силлогизма слабого модуса при условии, что в силлогизмах совпадают предикат, субъект и средний термин;
потребуется подобрать правильную пару силлогизмов). 
Возможно, вам тут также потребуется условие непустоты --- в таком случае приведите контрпример при его отсутствии.

\item Докажите (или опровергните) следующие формулы в исчислении предикатов:
\begin{enumerate}
\item $(\forall x.\phi)\rightarrow (\forall y.\phi[x := y])$, если есть свобода для подстановки $y$ вместо $x$ в $\phi$ и $y$ не входит свободно в $\phi$.
\item $(\forall x.\phi)\rightarrow (\exists x.\phi)$ и $(\forall x.\forall x.\phi) \rightarrow (\forall x.\phi)$
\item $(\forall x.\phi) \rightarrow (\neg \exists x.\neg \phi)$ и $(\exists x.\neg\phi) \rightarrow (\neg \forall x.\phi)$
\item $(\forall x.\alpha\vee\beta) \rightarrow (\neg \exists x.\neg \alpha) \with (\neg \exists x.\neg\beta)$
\item $((\forall x.\alpha) \vee (\forall y.\beta)) \rightarrow \forall x.\forall y.\alpha\vee\beta$. Какие условия
надо наложить на переменные и формулы? Приведите контрпримеры, поясняющие необходимость условий.
\item $(\alpha\rightarrow\beta) \rightarrow \forall x.(\alpha\rightarrow\beta)$. Возможно, нужно наложить
какие-то условия на переменные и формулы? Приведите контрпримеры, поясняющие необходимость условий (если 
условия требуются).
\item $(\alpha \rightarrow \forall x.\beta) \rightarrow (\forall x.\alpha\rightarrow\beta)$ при условии, что $x$ не входит свободно в $\alpha$.
\end{enumerate}

\item Опровергните формулы $\phi\rightarrow\forall x.\phi$ и $(\exists x.\phi)\rightarrow (\forall x.\phi)$

\item Докажите или опровергните (каждую формулу в отдельности): $(\forall x.\exists y.\phi) \rightarrow (\exists y.\forall x.\phi)$ и
$(\exists x.\forall y.\phi) \rightarrow (\forall y.\exists x.\phi)$;
\item Докажите или опровергните (каждую формулу в отдельности): $(\forall x.\exists y.\phi) \rightarrow (\exists x.\forall y.\phi)$ и
$(\exists x.\forall y.\phi) \rightarrow (\forall x.\exists y.\phi)$

\end{enumerate}

\section*{Задание №6. Теорема о полноте И.П.}
\begin{enumerate}
\item Докажите теорему Гливенко: в КИВ/ИИВ, если $\vdash_\text{к} \varphi$, то $\vdash_\text{и} \neg\neg\varphi$. А также покажите
\emph{Следствие:} ИИВ противоречиво тогда и только тогда, когда противоречиво КИВ.
\item Докажите, что теорема Гливенко неверна в интуиционистском исчислении предикатов. 

\emph{Указание:} возможно, вам поможет следующая модель для ИИП. Докажите, что это модель ИИП, если вы пойдёте по этому пути.
Пусть $\langle X, \Omega\rangle$ --- некоторое топологическое
пространство и $V = \Omega$ (как и в исчислении высказываний),
пропозициональные связки определим аналогично топологической интерпретации И.И.В., 
оценки же кванторов сделать такими:
$$\llbracket \forall x.\varphi \rrbracket = \left(\bigcap_{v \in D} \llbracket \varphi \rrbracket^{x := v}\right)^\circ,\quad
  \llbracket \exists x.\varphi \rrbracket = \bigcup_{v \in D} \llbracket \varphi \rrbracket^{x := v}$$

\item Для построения аналога теоремы Гливенко определим операцию $(\cdot)_\text{Ku}$:
$$(\varphi\star\psi)_\text{Ku} = \varphi_\text{Ku} \star \psi_\text{Ku}, \quad 
(\forall x.\varphi)_\text{Ku} = \forall x.\neg\neg\varphi_\text{Ku}, \quad
(\exists x.\varphi)_\text{Ku} = \exists x.\varphi_\text{Ku}$$

Тогда \emph{преобразованием Куроды} формулы $\varphi$ назовём $\neg\neg(\varphi_\text{Ku})$. 
Покажите, что $\vdash_\text{к}\alpha$ тогда и только тогда, когда $\vdash_\text{и}\neg\neg(\alpha_\text{Ku})$.


\item Пусть задано какое-то семейство термов без свободных переменных $T$ и одноместный предикатный символ $P$.
Покажите, что семейство $\Gamma = \{ P(\theta)\ |\ \theta \in T \}$ непротиворечиво (семейство всех формул подобного вида).
Скажем, пример с лекции непротиворечив: $\Gamma = \{ P(1), P(2), P(3), \dots \}$
\item Пусть $M$ ---  полное непротиворечивое множество формул и $\mathcal{M}$ --- построенная в соответствии с теоремой о 
полноте исчисления предикатов оценка для $M$. Мы ожидаем, что $\mathcal{M}$ будет моделью для $M$, для чего было необходимо доказать
несколько утверждений. Восполните некоторые пробелы в том доказательстве. А именно, если $\varphi$ --- 
некоторая формула и для любой формулы $\zeta$, более короткой, чем $\varphi$, выполнено
$\mathcal{M}\models\zeta$ тогда и только тогда, когда $\zeta\in M$, тогда покажите:
\begin{enumerate}
\item если $\varphi \equiv \alpha\vee\beta$, $\mathcal{M}\models\alpha\vee\beta$, то $\alpha\vee\beta\in M$; и если $\mathcal{M}\cancel{\models}\alpha\vee\beta$, то $\alpha\vee\beta\notin M$;
\item если $\varphi \equiv \neg\alpha$, $\mathcal{M}\models\neg\alpha$, то $\neg\alpha\in M$; и если $\mathcal{M}\cancel{\models}\neg\alpha$, то $\neg\alpha\notin M$.
\end{enumerate}
\item Обозначим за $\sigma\leftrightarrow\zeta$ две импликации: $(\sigma\rightarrow\zeta)\with(\zeta\rightarrow\sigma)$.
Докажите, что $(\exists x.\varphi) \leftrightarrow ((\exists y.\varphi)[x := y])$. Какие условия надо наложить на $\varphi$, чтобы доказательства имели место?
Постройте контрпримеры к ситуациям, когда условия не выполнены.
\item Попробуем наметить доказательство теоремы о переносе кванторов:
\begin{enumerate}
\item Например, внесём квантор внутрь для конъюнкции: $(\forall x.\alpha\with\beta) \rightarrow (\forall x.\alpha)\with(\forall x.\beta)$. Какие условия надо наложить на формулы $\alpha$ и $\beta$
(при наложении условия предложите надлежащий контрпример)?
\item И теперь вынесем квантор наружу --- например, для импликации: $(\forall x.\alpha)\rightarrow(\forall y.\beta)$. Как правильно вынести левый квантор, 
$\forall x.\forall y.\alpha\rightarrow\beta$ или $\exists x.\forall y.\alpha\rightarrow\beta$? Постройте вывод для правильного варианта, постройте контрпример для неправильного.
Какие условия надо наложить на формулы $\alpha$ и $\beta$
(при наложении условия предложите надлежащий контрпример)?
\item Научимся преобразовывать выражение по частям: например, если $\alpha\rightarrow\beta$, то $(\beta\rightarrow\gamma) \rightarrow (\alpha\rightarrow\gamma)$
и $(\forall x.\alpha) \rightarrow (\forall x.\beta)$ (какие условия надо наложить на формулы $\alpha$ и $\beta$?).
\item Докажите, что для любого выражения $\varphi$ найдётся эквивалентное ему выражение с поверхностными кванторами $\psi$. В доказательстве можно ссылаться на предыдущие пункты
и на другие аналогичные утверждения (например, для других связок). В полном доказательстве $\vdash\varphi\rightarrow\psi$, известном автору, используется 38 подобных вспомогательных утверждений.
\end{enumerate}
\end{enumerate}

\section*{Задание №7. Неразрешимость ИП, аксиоматика Пеано, формальная арифметика.}
\begin{enumerate}
\item Покажите, что исчисление предикатов неполно в моделях ограниченной конечной мощности. 
А именно, пусть дана модель $\mathcal{M} = \langle D, F, T, E \rangle$. 
Назовём мощностью модели мощность её предметного множества: $|\mathcal{M}| = |D|$.
Покажите, что для любой конечной мощности модели $n\in\mathbb{N}$ найдётся такая формула $\alpha$, что 
при $|\mathcal{M}|\le n$ выполнено $\llbracket\alpha\rrbracket_\mathcal{M} = \text{И}$, но $\not\vdash\alpha$.

\item Напишите следующие программы для машины Тьюринга и продемонстрируйте их работу с помощью какого-нибудь эмулятора:
\begin{enumerate}
\item сортирующую строку в алфавите $\{0,1\}$ (например, из $01110111$ программа должна сделать $00111111$);
в этом и в последующих заданиях в алфавит внешних символов при необходимости можно добавить дополнительные символы;
\item прибавляющую 1 к числу в двоичной системе (например, из $1011$ программа должна сделать $1100$);
\item в строке в алфавите $\{0,1,2\}$ сокращающую все <<постоянные>> подстроки до одного символа:
машина должна превратить $1022220101111$ в $1020101$;
\item допускающую правильные скобочные записи (например, $(())$ должно допускаться, а $)()($ --- отвергаться);
\item допускающую строки вида $a^nb^nc^n$ в алфавите $\{a,b,c\}$ (например, строка $aabbcc$ должна допускаться, а $abbbc$ --- отвергаться);
\item допускающую только строки, состоящие из констант и импликаций (алфавит $\{ 0, 1, \rightarrow, (, ) \}$), 
содержащие истинные логические выражения;
например, выражение $(((0 \rightarrow 1) \rightarrow 0) \rightarrow 0)$ машина должна допустить, а
выражение $((1 \rightarrow 1) \rightarrow 0)$ --- отвергнуть. Можно считать, что выражение написано в корректном синтаксисе (все скобки корректно
расставлены, никаких скобок не пропущено).
\end{enumerate}

\item Пусть дано число $k \in \mathbb{N}$. Известно, что если $0 \le k < 2^n$, то возможно закодировать $k$ с помощью $n$ цифр 0 и 1.
А как закодировать число, если мы не знаем верхней границы $n$? Какую лучшую асимптотику длины кодировки относительно $\log_2 k$ вы можете
предложить? Кодировка должна использовать только символы 0 и 1, также код должен быть префиксным (ни один код не является префиксом другого).

\item Рассмотрим аксиоматику Пеано. 
Пусть $$a^b = \left\{\begin{array}{ll}1,& b= 0 \\a^c\cdot a,&b = c'\end{array}\right.$$
Докажите, что:
\begin{enumerate}
\item $a \cdot b = b \cdot a$
\item $(a + b) \cdot c = a \cdot c + b \cdot c$
\item $a^{b+c} = a^b \cdot a^c$
\item $(a^b)^c = a^{b \cdot c}$
\item $(a + b) + c = a + (b + c)$
\end{enumerate}

\item Определим отношение <<меньше или равно>> так: $0 \le a$ и $a' \le b'$, если $a \le b$. Докажите, что:
\begin{enumerate}
\item $x \le x+y$;
\item $x \le x \cdot y$ (укажите, когда это так --- в остальных случаях приведите контрпримеры);
\item Если $a \le b$ и $m \le n$, то $a \cdot m \le b \cdot n$;
\item $x \le y$ тогда и только тогда, когда существует $n$, что $x + n = y$;
\item Будем говорить, что $a$ делится на $b$ с остатком, если существуют такие $p$ и $q$, что 
$a = b \cdot p + q$ и $0 \le q < b$. Покажите, что $p$ и $q$ всегда существуют и единственны,
если $b > 0$.
\end{enumerate}

\item Определим <<ограниченное вычитание>>: $$a \dotminus b = \left\{\begin{array}{ll}0, & a = 0\\a, & b = 0\\p \dotminus q, & a = p', b = q'\end{array}\right.$$
Докажите, что:
\begin{enumerate}
\item $a + b \dotminus b = a$;
\item $(a \dotminus b) \cdot c = a \cdot c \dotminus b \cdot c$;
\item $a \dotminus b \le a + b$;
\item $a \dotminus b = 0$ тогда и только тогда, когда $a \le b$.
\end{enumerate}

\item Обозначим за $\overline{n}$ представление числа $n$ в формальной арифметике: %, по сути это ноль с $n$ штрихами:

$$\overline{n} = \left\{\begin{array}{ll}0, &n = 0\\
           \left(\overline{k}\right)', & n=k+1\end{array}\right.$$

Например, $\overline{5} = 0'''''$. Докажите в формальной арифметике:
\begin{enumerate}
\item $\vdash \overline{2} \cdot \overline{3} = \overline{6}$;
\item $\vdash \forall a.\forall b.a = b \rightarrow b = a$;
\item $\vdash \forall a.a \cdot 0 = 0 \cdot a$;
\item $\vdash \forall a.a \cdot \overline{2} = a + a$;
\item $\vdash \forall p.(\exists q.q' = p) \vee p = 0$ (единственность нуля);
\item $\vdash p \cdot q = 0 \rightarrow p = 0 \vee q = 0$ (отсутствие делителей нуля);
\end{enumerate}
\end{enumerate}

\section*{Задание №8. Арифметизация логики.}
\begin{enumerate}
\item Покажите, что модус Darapti выполнен в формализации категорических силлогизмов Лейбница.
\item Покажите, что модус Cesaro выполнен в формализации категорических силлогизмов Лейбница.
\item Будем говорить, что $k$-местное отношение $R$ выразимо в формальной арифметике,
если существует формула формальной арифметики $\rho$ со свободными переменными $x_1, \dots, x_k$, что:
\begin{itemize}
\item для всех $\langle a_1, \dots, a_k \rangle \in R$ выполнено $\vdash\rho[x_1 := \overline{a_1}]\dots[x_k := \overline{a_k}]$
(доказуема формула $\rho$ с подставленными значениями $a_1, \dots, a_k$ вместо свободных переменных $x_1, \dots, x_k$);
\item для всех $\langle a_1, \dots, a_k \rangle \notin R$ выполнено $\vdash\neg\rho[x_1 := \overline{a_1}]\dots[x_k := \overline{a_k}]$.
\end{itemize}

Выразите в формальной арифметике (укажите формулу $\rho$ и докажите требуемые свойства про неё):
\begin{enumerate}
\item <<пустое>> отношение $R = \varnothing$ (никакие два числа не состоят в отношении);
\item двуместное отношение <<хотя бы один из аргументов равен 0>>.
\item одноместное отношение <<аргумент меньше 3>>.
\end{enumerate}

\item С использованием эмулятора рекурсивных функций (применённый на лекции синтаксис
подсказывает использование библиотеки на С++, но вы можете выбрать любой другой способ эмуляции),
покажите, что следующие функции примитивно-рекурсивны. Ваше решение должно быть продемонстрировано
в работе на простых примерах. Возможно, при реализации сложных функций вам потребуется 
для ускорения работы заменить базовые функции на <<нативные>> (например, умножение, реализованное
через примитивы, заменить на встроенную операцию) --- это можно делать при условии, что для них у вас есть 
эквивалентная примитивно-рекурсивная реализация.
\begin{enumerate}
\item умножение и ограниченное вычитание;
\item целочисленное деление и остаток от деления;
\item вычисление $n$-го простого числа (напомним теорему Бертрана-Чебышёва: для любого натурального $n \ge 2$ найдётся
простое число между $n$ и $2n$);
\item частичный логарифм $\textsc{plog}_n(k) = \max\{p\ |\ k\ \raisebox{-0.5ex}{\vdots}\ n^p\}$ (например, $\textsc{plog}_2(96)=5$);
\item вычисление длины списка в гёделевой нумерации (например, $\textsc{len}(3796875000) = \textsc{len}(2^3\cdot 3^5\cdot 5^9) = 3$);
\item выделение подсписка из списка (например, $\textsc{sublist}(2^2 \cdot 3^3 \cdot 5^4 \cdot 7^5, 2, 2) = 2^4 \cdot 3^5$);
\item склейка двух списков в гёделевой нумерации (например, $\textsc{append}(2^3 \cdot 3^5,2^7 \cdot 3^6) = 2^3 \cdot 3^5 \cdot 5^7 \cdot 7^6$).
\end{enumerate}

\item Дадим следующее определение общерекурсивным функциям (отличается от того, что было на лекции): 
рассмотрим термы языка формальной арифметики (без арифметических операций) и назовём 
выражение вида $\theta_1=\theta'_1$ уравнением. Будем говорить, что из системы уравнений $E$ выводится уравнение
$\theta_k=\theta'_k$, если оно будет получено путём применения следующих правил:
\begin{itemize}
\item в любом уравнении системы можно заменить все вхождения какой-то одной переменной $x$ на какой-то литерал $\overline{n}$;
\item если в систему входит уравнение вида $f(\overline{n_1},\dots,\overline{n_k})=\overline{m}$, то 
в любом уравнении системы можно заменить его левую часть на правую;
\item в любом уравнении можно поменять левую и правую часть равенства местами.
\end{itemize}
Функция $f$ называется общерекурсивной, если существует конечная система уравнений $E$, что при фиксированных $n_1,\dots,n_k$
из неё может быть выведено $f(\overline{n_1},\dots,\overline{n_k}) = \overline{m}$
для единственного $m$.

Например, 
$$\left\{\begin{array}{l}f(x,0) = x\\f(x,y') = f(x,y)'\end{array}\right.$$

задаёт $f(x,y) = x+y$

Определите следующие функции в общерекурсивных функциях:
\begin{enumerate}
\item умножение, деление;
\item проверку числа на простоту;
\item функцию Аккермана.
\end{enumerate}

\item Покажите, что если функция общерекурсивна в смысле прошлого пункта, то она является эффективно вычислимой (предложите
любую реализацию, на любом языке, сводящемся к абстрактному алгоритму).

\item Пусть $n$-местное отношение $R$ выразимо в формальной арифметике. Покажите, что
тогда его характеристическая функция $C_R$ представима в формальной арифметике:
$$C_R(\overrightarrow{x}) = \left\{\begin{array}{ll}1,& \overrightarrow{x}\in R\\0, &\text{иначе}\end{array}\right.$$

\item Покажите, что в определении представимости пункт
$\vdash\neg\varphi(\overline{x_1},\dots,\overline{x_n},\overline{y})$ при $f(x_1,\dots,x_n) \ne y$ не является
обязательным и может быть доказан из остальных пунктов определения представимой функции.

\item Покажите, что функция $f(x) = x+2$ представима в формальной арифметике (в ответе также требуется привести все пропущенные
на лекции выводы в формальной арифметике).
\end{enumerate}

\section*{Задание №9. Теоремы о неполноте арифметики.}
\begin{enumerate}
\item Покажите, что омега-непротиворечивая теория непротиворечива.
\item Пусть $\zeta_\varphi(x) := \forall z.\sigma (x,x,z) \rightarrow \varphi(z)$,
где формула $\sigma(p,q,r)$ представляет функцию $\textsc{SUBST}(p,q)$, заменяющую в формуле с гёделевым номером $p$
все свободные переменные $x_1$ на формулу $q$. Тогда покажите, что формулу $\alpha_\varphi := \zeta_\varphi(\overline{\ulcorner\zeta_\varphi\urcorner})$
можно взять в качестве формулы $\alpha$ в лемме об автоссылках: $\vdash \varphi(\overline{\ulcorner\alpha_\varphi\urcorner}) \leftrightarrow \alpha_\varphi$.

\item Покажите, что если в некоторой корректной теории $\mathcal{S}$, имеющей модель $M$, ввести дополнительную аксиому $\alpha$, 
причём $\llbracket \alpha \rrbracket_M = \text{И}$, то тогда получившаяся теория не станет противоречивой и 
будет иметь ту же модель $M$ и те же оценки для формул, что и исходная.

\item Покажите, что вопрос о принадлежности формулы $\alpha(x) = \forall p.\delta(x,p) \rightarrow \neg \sigma(p)$ в доказательстве 
теоремы о невыразимости доказуемости к множеству $Th_\mathcal{S}$ ведёт к противоречию.
\item Покажите, что формула $D(x)$ из доказательства теоремы о невыразимости доказуемости является представимой в формальной арифметике.

\item Рассмотрим определение предела последовательности: $$\forall \varepsilon > 0.\exists N \in \mathbb{N}.\forall n\in\mathbb{N}. n > N \rightarrow |a_n-l| < \varepsilon$$
Раскройте все нелогические предикатные и функциональные символы, переведите эту формулу на язык исчисления предикатов, 
постройте эквивалентную формулу с поверхностными кванторами, проведите её сколемизацию
и постройте эквивалентную систему дизъюнктов.

\item Рассмотрим формулы $\forall n.P(n)\rightarrow Q(n)$ и $\forall n.P(n)\rightarrow P(f(n)) \vee P(g(n))$, здесь $P$ и $Q$ --- некоторые предикатные
символы. Постройте для каждой из них эрбранов универсум и система основных примеров.

\item Принципом Дирихле (<<pigeonhole principle>>) называется утверждение о том, что нельзя разместить $n$ кроликов в $m$ ящиках (при $m < n$) так, чтобы
каждый кролик находился бы в ящике один. 

Пусть пропозициональные переменные $P_{i,j}$, где $i \in \overline{1,n}$ и $j \in \overline{1,m}$ 
соответствуют утверждениям вида <<кролик $i$ находится в ящике $j$>>.
Формализуйте в исчислении высказываний условие 
<<каждый кролик находится в отдельном ящике в одиночестве>>,
понимаемое как условие на переменные $P_{i,j}$,
постройте соответствующее выражение в КНФ. 

Какова будет его система основных примеров?
Покажите, что система основных примеров формулы противоречива при $m < n$.
\end{enumerate}

\section*{Задание №10. Метод резолюций.}
\begin{enumerate}
\item На выбранном вами языке (кроме C, C++, Pascal) напишите программу, печатающую свой текст.
Программа не должна использовать внешний мир (на чтение): например, использовать специальные команды
печати своего текста, рефлексию, работу с файлами и т.п.

\item На лекции мы приводили способ проверки доказуемости $\gamma_1,\dots,\gamma_n\vdash\alpha$, а именно, 
строили систему дизъюнктов $\{SNF(\gamma_1),\dots,SNF(\gamma_n),SNF(\neg\alpha)\}$ и проверяли её противоречивость
(здесь $SNF(\varphi)$ --- сколемизация формулы $\varphi$ и приведение её к КНФ).
Обоснуйте данный способ.

\item Мы доказывали теорему Эрбрана, проводя следующее схематическое рассуждение:
\begin{enumerate}
\item дано --- система основных примеров $\mathcal{E}_S$, построенная по системе дизъюнктов $S$, противоречива;
\item значит, эта система не имеет модели;
\item значит, по теореме Гёделя о компактности, у $\mathcal{E}_S$ есть конечное противоречивое подмножество.
\end{enumerate}

Заметим, что теорема Гёделя о компактности (равно как и её контрапозиция) не может быть здесь
непосредственно применена. Укажите отличия и восполните пробелы в схематическом рассуждении.

\item Постройте универсум Эрбрана для аксиомы индукции при $\varphi:=\exists y.P(x,y)$: 
$$(\exists y.P(0,y))\with(\forall x.(\exists y.P(x,y))\rightarrow\exists y.P(x',y))\rightarrow\exists y.P(x,y)$$
Напомним, что универсум Эрбрана строится для формулы в КНФ после сколемизации.

\item Рассмотрим множество дизъюнктов исчисления высказываний $S$. 
Обозначим шаг применения правила резолюции всеми возможными способами к дизъюнктам 
множества $S$ как операцию $\mathcal{R}(S)$. Положим $S_0 = S$, $S_{n+1} = S_n \cup \mathcal{R}(S_n)$ и $S' = \cup S_i$.
\begin{enumerate}
\item Покажите, что $S'$ противоречиво (то есть для любой интерпретации $M$ найдутся значения для
свободных переменных $d_1,\dots,d_k$ и дизъюнкт $\delta \in S'$, что $M \not\models \delta[x_1 := d_1,\dots,x_k:=d_k]$)
тогда и только тогда, когда $S$ противоречиво.
\item Покажите, что для формул исчисления высказываний $S'$ конечно при конечном $S$.
\item Покажите, что если $S$ противоречиво, то в $S'$ обязательно найдутся дизъюнкты с явным противоречием ($\beta$ и $\neg\beta$).
\end{enumerate}
\item Покажите, что если $J = \{\delta_1,\neg\delta_2\}$ и $\delta_1$ явно противоречит $\neg\delta_2$ при некоторой подстановке
свободных переменных (то есть, $\sigma(\delta_1) = \sigma(\delta_2)$), то $J$ также противоречива.
\item В данном задании будет необходимо проверить выводимость утверждений в исчислении предикатов с помощью метода резолюций.
Продемонстрируем метод на простом примере. Докажем $(\forall x.P(x))\rightarrow P(0)$.
\begin{itemize}
\item Возьмём отрицание: $\neg((\exists x.\neg P(x)) \vee P(0))$, то есть $\neg \exists x.\neg P(x) \vee P(0)$,
то есть $\forall x.P(x) \with \neg P(0)$
\item Проведём сколемизацию и переведём в КНФ: $\{P(x),\neg P(0)\}$ при свободной переменной $x$ (по которой имеется
неявный квантор всеобщности).
\item Применяем правило резолюции:
$$\infer[\pi = \mathcal{U}\big[{P(x'),P(0)\big]}]{\Box}{P(x)\quad\neg P(0)}$$
\item Получили пустой дизъюнкт (то есть явное противоречие), формула доказана.
\end{itemize}
Убедитесь с помощью метода резолюций, что:
\begin{enumerate}
\item $(\exists x.P(x)) \rightarrow (\exists y.P(y))$
\item $(\exists x.\forall y.P(x,y)) \rightarrow (\forall y.\exists x.P(x,y))$
\item $(\forall x.P(x') \rightarrow P(x)) \with P(0''') \rightarrow P(0)$
\item $((\forall x.P(x,y)\rightarrow P(f(x),y)) \with (\forall y.P(x,y) \rightarrow P(x,g(y)) \with P(a,b)\rightarrow P(f(f(f(a))),g(g(b)))$
\end{enumerate}
\item Формализуйте следующие утверждения и покажите с помощью метода резолюций:
\begin{enumerate}
\item Категорический силлогизм <<Barbara>>
\item Категорический силлогизм <<Camenes>>
\item Слабый силлогизм, без дополнительного условия непустоты (такой вывод получится некорректным).
Как поведёт себя метод резолюции для такого силлогизма? Также добавьте условие непустоты и примените метод резолюции.
\end{enumerate}
\item Примените метод резолюции к доказательству принципа Дирихле для $n=4$ и $m=3$ (см. предыдущее домашнее задание).
\item В правиле резолюции к ответу применяются унифицирующая подстановка $\pi$ 
и подстановки $\sigma_1$ и $\sigma_2$, заменяющие переменные в дизъюнктах на свежие. 
Покажите, что эти подстановки важны. А именно, предложите непротиворечивый набор дизъюнтков, из которого можно вывести противоречие
методом резолюции, если в правиле резолюции не применять $\pi$ к результату. Правило, иллюстрирующее проблему:
$$\infer[\pi = {\mathcal{U}\big[ \beta_1, \beta_2 \big]}]{\varphi\vee\psi}{\varphi\vee\beta_1\quad\neg\beta_2\vee\psi}$$
%\item Предложите противоречивый набор дизъюнтков, из которого не получится вывести противоречие,
%если в правиле резолюции не применять $\sigma_1$/$\sigma_2$ к результату.
%Правило, иллюстрирующее проблему:
%$$\infer[\pi = {\mathcal{U}\big[ \beta_1, \beta_2 \big]}]{\pi(\varphi\vee\psi)}{\varphi\vee\beta_1\quad\neg\beta_2\vee\psi}$$
%\end{enumerate}
\item Покажите, что семейство $S$ непротиворечиво тогда и только тогда, когда $S$ с добавленным 
применением правила резолюции для исчисления предикатов также непротиворечиво.
%\item Продемонстрируйте, как будет вести себя метод резолюций на следующем примере:
%$\forall x.P(x) \rightarrow P(f(x))$
\item Можно ли проверить аксиому индукции с помощью метода резолюций? То есть, закончится ли процесс 
применения правила резолюций к отрицанию аксиомы получением противоречия?
\end{enumerate}

\section*{Задание №11. Лямбда-исчисление}
Для проверки и демонстрации заданий используйте какой-нибудь эмулятор лямбда-исчисления,
например LCI: \url{https://www.chatzi.org/lci/}

\begin{enumerate}
\item Определите следующие функции в лямбда-исчислении. В качестве подсказки заметим, что у задач на чёрчевские
нумералы есть отдалённое сходство с задачами на примитивно-рекурсивные функции: все функции, предложенные 
в упражнениях, могут быть реализованы с помощью фиксированного количества циклов \verb!for! (то есть, при помощи 
указания надлежащих функций \verb!f! в аргументах чёрчевских нумералов). Также напоминаем, что в лямбда-исчислении
несложно выражаются упорядоченные пары и значения алгебраических типов.
\begin{enumerate}
\item <<Исключающее ИЛИ>> на 3 аргумента, а также <<Мажоритарный элемент>>, проверяющий, что большинство 
входных аргументов --- истина: $M(a_1,a_2,a_3) = \text{И}$, если $|\{i\ |\ i=\overline{1\dots 3}, a_i = \text{И}\}| \ge 2$.
\item \verb!IsZero!, возвращающую истину, если аргумент равен 0,
\verb!IsEven!: возвращает истину, если аргумент чётен.
\item \verb!Div3!: делит нумерал на 3 с округлением вверх, \verb!Fib!: вычисляет соответствующее число Фибоначчи.
\item Вычисление квадратного корня числа (округление вниз).
\item Ограниченное вычитание и сравнение двух нумералов.
\item Деление с остатком для чёрчевских нумералов (возвращает упорядоченную пару).
\end{enumerate}

\item Найдите нормальную форму для следующих выражений (а также докажите, почему она именно такова):
\begin{enumerate}
\item $\overline{2}\ \overline{2}$ и $\overline{2}\ \overline{2}\ \overline{2}$
\item $\overline{m}\ \overline{n}$
\end{enumerate}

\item На лекции был приведён комбинатор неподвижной точки $Y := \lambda f.(\lambda x.f\ (x\ x))\ (\lambda x.f\ (x\ x))$, обладающий свойством
$Y\ P =_\beta P\ (Y\ P)$ для любого терма $P$. С его помощью оказывается возможным реализовывать рекурсию.

Например, зададим функцию, возводящую 2 в соответствующую степень: $$P := \lambda f.\lambda x.(IsZero\ x)\ 1\ (f\ ((Dec\ x) \cdot 2))$$
Сравните это с кодом на Си: 
\begin{center}\verb!unsigned f (unsigned x) { return x == 0 ? 1 : f ((x-1) * 2); }!\end{center}
Тогда, вызванная как $Y\ P\ x$, эта функция вычислит $2^x$. Например, $Y\ P\ 1 =_\beta$

\vspace{-0.3cm}
$$\begin{array}{l}=_\beta P\ (Y\ P)\ 1 = (\lambda f.\lambda x.(IsZero\ x)\ 1\ ((Dec\ x)\cdot 2)))\ (Y\ P)\ 1 \\
  =_\beta (IsZero\ 1)\ 1\ ((Y\ P\ (Dec\ 1)) \cdot 2))) =_\beta ((Y\ P\ 0) \cdot 2 \\
  =_\beta (P\ (Y\ P)\ 0) \cdot 2 \\
  =_\beta (IsZero\ 0)\ 1\ ((Y\ P\ (Dec\ 0)) \cdot 2))) \cdot 2\\
  =_\beta 1 \cdot 2 =_\beta 2\end{array}$$

С помощью $Y$-комбинатора реализуйте:
\begin{enumerate}
\item Вычисление $k$-го простого числа.
\item Частичный логарифм.
\item Предложите три других комбинатора неподвижной точки (других --- то есть, не бета-экви\-ва\-лент\-ных $Y$ и между собой).
\end{enumerate}

\item Напомним, что список может быть задан с помощью алгебраического типа с двумя конструкторами, \verb!Nil! и \verb!Cons!
(см. доказательство неразрешимости исчисления предикатов). С учётом этого знания, и с учётом представления 
алгебраических типов, приведённого на лекции, реализуйте следующие конструкции:
\begin{enumerate}
\item Функцию, вычисляющую длину списка.
\item Функцию высшего порядка \verb!map2! --- последовательно применяет функцию к головам двух списков, возвращая список результатов:
\verb!map2 (*) [1;3] [2;4]! вернёт \verb![2;12]!.
\item Функцию \verb!rev!, возвращающую перевёрнутый список. Например, $\text{rev}[1,3,5] = [5,3,1]$.
\end{enumerate}

\item Напомним определение:
$$\begin{array}{l}
S := \lambda x.\lambda y.\lambda z.x\ z\ (y\ z)\\
K := \lambda x.\lambda y.x\\
I := \lambda x.x
\end{array}$$

Известна теорема о том, что для любого комбинатора $X$ можно найти выражение $P$
(состоящее только из скобок, пробелов и комбинаторов $S$ и $K$), что $X =_\beta P$.
Будем говорить, что комбинатор $P$ \emph{выражает} комбинатор $X$ в базисе $SK$.

Выразите в базисе $SK$:
\begin{enumerate}
\item $\lambda x.x\ x$, $\Omega$
\item $F$, $\overline{1}$
\item $\lambda x.\lambda y.\lambda z.y$
\end{enumerate}

\item По аналогии с импликативным фрагментом ИИВ, мы можем рассмотреть полное просто-типизированное лямбда-исчисление,
в котором добавить конструкции для упорядоченной пары (конъюнкции), алгебраического типа (дизъюнкции) и необитаемого типа (лжи).

Правила для конъюнкции:

$$\infer[\text{Конструктор пары}]{\Gamma\vdash\langle A,B\rangle : \alpha\with\beta}{\Gamma\vdash A:\alpha\quad\quad\Gamma\vdash B:\beta}$$
$$\infer[\text{Левая проекция}]{\Gamma\vdash \pi_L P:\alpha}{\Gamma\vdash P : \alpha\with\beta}\quad\quad
\infer[\text{Правая проекция}]{\Gamma\vdash \pi_R P:\beta}{\Gamma\vdash P : \alpha\with\beta}$$

Правила для дизъюнкции:

$$\infer[\text{Левая инъекция}]{\Gamma\vdash In_L A : \alpha\vee\beta}{\Gamma\vdash A:\alpha}\quad\quad
\infer[\text{Правая инъекция}]{\Gamma\vdash In_R B : \alpha\vee\beta}{\Gamma\vdash B:\beta}$$
$$\infer[\text{Сопоставление с образцом}]{\Gamma\vdash \text{Case}\ L\ R\ D : \gamma}{\Gamma\vdash L : \alpha\rightarrow\gamma\quad\Gamma\vdash R: \beta\rightarrow\gamma\quad \Gamma\vdash D:\alpha\vee\beta}$$

Правило для лжи:

$$\infer{\Gamma\vdash \text{absurd\ }E:\alpha}{\Gamma\vdash E:\bot}$$

Постройте натуральный вывод для следующих утверждений, а также постройте соответствующее в смысле изоморфизма Карри-Ховарда 
лямбда-выражение (и докажите его тип):
\begin{enumerate}
\item Карринг: $(\alpha\with\beta\rightarrow\gamma)\leftrightarrow(\alpha\rightarrow\beta\rightarrow\gamma)$
\item $(\alpha\vee\beta\rightarrow\gamma)\leftrightarrow(\alpha\rightarrow\gamma)\with(\beta\rightarrow\gamma)$
\item $((\alpha\rightarrow\bot)\vee\beta)\rightarrow(\alpha\rightarrow\beta)$
\end{enumerate}

\item Покажите, что в отличии от бета-редуцируемости, для бета-редукции не выполнена теорема Чёрча-Россера
(рефлексивность и транзитивность отношения для теоремы существенна).
А именно, существует такое лямбда-выражение $T$, что $T \rightarrow_\beta A$, $T \rightarrow_\beta B$,
$A \ne B$, но нет $S$, что $A \rightarrow_\beta S$ и $B \rightarrow_\beta S$.
\item Рассмотрим комбинаторы $Y$ и $\Omega := (\lambda x.x\ x)\ (\lambda x.x\ x)$.
\begin{enumerate}
\item Покажите, что если $\vdash A : \alpha$, то любое подвыражение $A$ также имеет тип.
\item Покажите, что $Y$ и $\Omega$ не имеют типа в просто-типизированном лямбда-исчислении.
\item Выразите их в языке Хаскель (Окамль). Каковы их типы?
\end{enumerate}


\item Пусть фиксирован тип чёрчевского нумерала, это $(\alpha\rightarrow\alpha)\rightarrow(\alpha\rightarrow\alpha)$.
Найдите выражения и их тип в просто-типизированном лямбда-исчислении (и докажите наличие этого типа) для следующих выражений.

Возможно, вам в этом поможет язык Хаскель: определим на языке Хаскель следующую функцию: \verb!show_church n = show (n (+1) 0)!.
Легко заметить, что \verb!show_church (\f -> \x -> f (f x))! вернёт 2. Как вы думаете, какой у выражения \verb!\f -> \x -> f (f x))! тип?

\begin{enumerate}
\item Инкремент чёрчевского нумерала --- то есть, докажите, что
$\vdash \lambda n.\lambda f.\lambda x.n\ f\ (f\ x) : \eta\rightarrow\eta$, 
где $\eta = (\alpha\rightarrow\alpha)\rightarrow(\alpha\rightarrow\alpha)$.
\item Сложение двух чёрчевских нумералов;
\item Умножение двух чёрчевских нумералов (не каждая реализация умножения подойдёт).
\end{enumerate}

%\item Найдите необитаемый тип в просто-типизированном лямбда-исчислении: такой $\tau$, что $\not\vdash A : \tau$ ни 
%для какого $A$. Напомним, что в базовом варианте исчисления тип --- это либо константа, либо функция из типа в тип; 
%другие связки, в частности ложь, конъюнкция, дизъюнкция, в базовый набор типов просто-типизированного исчисления не входят.

\item Напомним, что в одном выражении может быть более одного бета-редекса. Назовём порядок редукции \emph{нормальным},
если всегда вычисляется тот бета-редекс, первый символ которого стоит левее всего в строке. \emph{Аппликативным}
порядком назовём такой, при котором вычисляется самый левый из наиболее вложенных редексов. 
Например, в выражении $$\dotuline{(\lambda x.x)\ \dashuline{((\lambda n.\lambda f.\lambda x.n\ f\ (f\ x))\ \lambda f.\lambda.x.x)}}$$
точками подчёркнут редекс для нормального порядка, а прерывистой линией --- для аппликативного.

Интуитивно в нормальном порядке
сперва вычисляется тело функции, а параметры вычисляются потом, по мере надобности. Аппликативный же порядок
предполагает обязательное вычисление параметров перед вычислением самой функции.

Известна теорема о том, что если у выражения в принципе существует нормальная форма, то она может быть получена
путём применения нормального порядка редукции.

Обычно в языках программирования применяется аппликативный порядок редукции, однако,
в (практически) любом языке конструкция \verb!if! вычисляется с помощью нормального порядка, поскольку условный оператор
вычисляет только одну из веток (\verb!then! или \verb!else!). 

Предложите лямбда-выражение, количество редукций которого до нормальной формы различается более чем в $n$ раз при применении
нормального и аппликативного порядков (по заданному заранее $n$).
\end{enumerate}



\end{document}
